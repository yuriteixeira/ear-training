(this["webpackJsonpear-training"]=this["webpackJsonpear-training"]||[]).push([[0],{10:function(e,t,n){e.exports=n(18)},15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),l=n(8),i=n.n(l),c=(n(15),n(1)),s=n.n(c),u=n(2),d=n(3),m=n(6),v=(n(17),n(9)),f={MAJOR:[2,2,1,2,2,2,1]};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+12*t}function E(e){return Number((440*Math.pow(2,e/12)).toFixed(2))}function b(){var e=window.AudioContext||window.webkitAudioContext||!1;if(e){var t=new e,n=t.createOscillator(),r=t.createGain(),o=r.gain;r.connect(t.destination),n.connect(t.destination),n.start(),o.setValueAtTime(0,0),a={context:t,oscilator:n}}else alert("This browser does not support this game")}function g(){var e=function(){var e=p(1)?1:-1,t=p(1)*e;return{note:h(p(11),t),octave:t}}();return{tonic:e,interval:function(e){var t=p(1)?1:-1,n=p(1)*t,a=p(7),r=h(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.MAJOR,a=e-1;if(a<0)return t;var r=n.reduce((function(e,t,n){return n>a?e:e+t}),0);return t+r}(a,e.note),n);return r===e.note&&(a=0),{number:a,note:r,octave:n}}(e)}}function p(e){return Math.floor(Math.random()*Math.floor(e+1))}function w(e){return H.apply(this,arguments)}function H(){return(H=Object(d.a)(s.a.mark((function e(t){var n,a,r,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:750,a=t.tonic,r=t.interval,e.next=4,C(a.note,n);case 4:return e.next=6,C(r.note,n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.oscilator.frequency.value=E(t),e.abrupt("return",new Promise((function(e){setTimeout((function(){a.oscilator.frequency.value=0,e()}),n)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t,n,a,r={totalQuestions:0,totalIncorrect:0,totalCorrect:0,sumTimeToHit:0,date:e.start,totalTime:e.end-e.start};if(console.debug({game:e}),e.questions.length<1)return r;var o,l=e.questions.reverse(),i=JSON.parse(localStorage.getItem("stats"))||[],c=(o=i,console.debug({historical:o}),o.reduce((function(e,t){var n,a;return t.avgHit.time>(null===(n=e.avgHit)||void 0===n?void 0:n.time)&&(e.avgHit=t.avgHit),t.fasterHit.time>(null===(a=e.fasterHit)||void 0===a?void 0:a.time)&&(e.fasterHit=t.fasterHit),e}),{})),s=l.reduce((function(e,t){if(e.totalQuestions++,t.choice!==t.interval.number)return e.totalIncorrect++,e;e.totalCorrect++;var n=t.end-t.start;e.sumTimeToHit=e.sumTimeToHit+n;var a=e.fasterHit&&e.fasterHit.end-e.fasterHit.start,r=e.fasterHit&&e.slowerHit.end-e.slowerHit.start;return(!a||n<a)&&(e.fasterHit=Object(u.a)({},t,{time:n})),(!r||n>r)&&(e.slowerHit=Object(u.a)({},t,{time:n})),e}),r);return s.avgHit={time:s.totalCorrect&&s.sumTimeToHit/s.totalCorrect},localStorage.setItem("stats",JSON.stringify([].concat(Object(v.a)(i),[s]))),console.debug({gameStats:s}),s.fasterHit.isRecord=s.fasterHit.time<(null===(t=c.fasterHit)||void 0===t?void 0:t.time),s.fasterHit.lastRecord=c.fasterHit,s.slowerHit.isRecord=s.slowerHit.time<(null===(n=c.slowerHit)||void 0===n?void 0:n.time),s.slowerHit.lastRecord=c.slowerHit,s.avgHit.isRecord=s.avgHit.time<(null===(a=c.avgHit)||void 0===a?void 0:a.time),s}function O(e){if(!e)return"???";var t=(e/1e3).toFixed(2);return"".concat(t,"s")}function k(e,t){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(),t.questions.unshift(a),n(Object(u.a)({},t)),e.next=5,w(t.questions[0]);case 5:t.questions[0].hasPlayed=!0,t.questions[0].start=Date.now(),n(Object(u.a)({},t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q,S=function(e){var t=e.start;return o.a.createElement("section",{className:"start"},o.a.createElement("header",null,"Ear Trainer \ud83c\udfbc"),o.a.createElement("button",{onClick:t},"Press to START!"))},x=function(e){var t=e.answer,n=e.question,a=e.skipQuestion,r=e.end;return o.a.createElement("section",{className:"question"},o.a.createElement("header",null,"What is the interval?"),o.a.createElement("section",{className:"choice"},o.a.createElement("button",{value:0,onClick:t,disabled:!n.hasPlayed},"1"),o.a.createElement("button",{value:1,onClick:t,disabled:!n.hasPlayed},"2"),o.a.createElement("button",{value:2,onClick:t,disabled:!n.hasPlayed},"3"),o.a.createElement("button",{value:3,onClick:t,disabled:!n.hasPlayed},"4"),o.a.createElement("button",{value:4,onClick:t,disabled:!n.hasPlayed},"5"),o.a.createElement("button",{value:5,onClick:t,disabled:!n.hasPlayed},"6"),o.a.createElement("button",{value:6,onClick:t,disabled:!n.hasPlayed},"7"),o.a.createElement("button",{value:7,onClick:t,disabled:!n.hasPlayed},"8")),o.a.createElement("section",{className:"other-actions"},o.a.createElement("button",{onClick:function(){return w(n)},disabled:!n.hasPlayed},"Re-play"),o.a.createElement("button",{onClick:a,disabled:!n.hasPlayed},"Next!"),o.a.createElement("button",{onClick:r,disabled:!n.hasPlayed},"Enough! Show how well I did")))},N=function(e){var t=e.isChoiceCorrect,n=e.question,a=e.end;return o.a.createElement("section",{className:"choice-feedback"},o.a.createElement("p",null,t?"CORRECT! \ud83c\udf89":"Incorrect... \ud83d\ude28"),!t&&o.a.createElement("p",null,"You chose ",n.choice+1," but the write interval is"," ",o.a.createElement("strong",null,n.interval.number+1)),o.a.createElement("p",null,o.a.createElement("strong",null,"But what about this one?")),o.a.createElement("p",null,o.a.createElement("button",{onClick:function(){return a(!1)}},"No more questions, show me stats")))},j=function(e){var t,n,a,r,l,i,c,s,u,d,m,v,f,h,E,b=e.stats;e.historicalStats;return o.a.createElement("section",{className:"end"},o.a.createElement("div",{className:"stats"},b.totalQuestions>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Total questions")),o.a.createElement("td",null,b.totalQuestions)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Correct")),o.a.createElement("td",null,b.totalCorrect)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Incorrect")),o.a.createElement("td",null,b.totalIncorrect)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Faster hit")),o.a.createElement("td",null,O(null===(t=b.fasterHit)||void 0===t?void 0:t.time)," ",b.fasterHit.isRecord?o.a.createElement("strong",null," RECORD!"):o.a.createElement("span",null,"(Last record: ",(null===(n=b.fasterHit)||void 0===n||null===(a=n.lastRecord)||void 0===a?void 0:a.time)||"???"," ","at ",String(new Date(null===(r=b.fasterHit)||void 0===r||null===(l=r.lastRecord)||void 0===l?void 0:l.start)),")"))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Slower hit")),o.a.createElement("td",null,O(null===(i=b.slowerHit)||void 0===i?void 0:i.time)," ",b.slowerHit.isRecord?o.a.createElement("strong",null," RECORD!"):o.a.createElement("span",null,"(Last record: ",(null===(c=b.slowerHit)||void 0===c||null===(s=c.lastRecord)||void 0===s?void 0:s.time)||"???"," ","at ",String(new Date(null===(u=b.slowerHit)||void 0===u||null===(d=u.lastRecord)||void 0===d?void 0:d.start)),")"))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Avg time to hit")),o.a.createElement("td",null,O(null===(m=b.avgHit)||void 0===m?void 0:m.time)," ",b.avgHit.isRecord?o.a.createElement("strong",null," RECORD!"):o.a.createElement("span",null,"(Last record: ",(null===(v=b.avgHit)||void 0===v||null===(f=v.lastRecord)||void 0===f?void 0:f.time)||"???"," at"," ",String(new Date(null===(h=b.avgHit)||void 0===h||null===(E=h.lastRecord)||void 0===E?void 0:E.start)),")"))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("strong",null,"Total elapsed time")),o.a.createElement("td",null,O(b.totalTime))))))))};var P=function(){var e=Object(r.useState)({}),t=Object(m.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)({}),i=Object(m.a)(l,2),c=i[0],v=i[1],f=function(e){var t,n=!!e.start,a=!!e.end,r=e.questions,o=r&&r.length>0?r[0]:void 0,l=null===o||void 0===o?void 0:o.choice;return{hasGameStarted:n,hasGameEnded:a,questions:r,question:o,hasMadeChoice:void 0!==l,isChoiceCorrect:l===(null===o||void 0===o||null===(t=o.interval)||void 0===t?void 0:t.number)}}(n),h=f.hasGameStarted,E=f.hasGameEnded,g=f.question,p=f.hasMadeChoice,w=f.isChoiceCorrect;function H(){return{start:Date.now(),questions:[],end:void 0}}function C(){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),t=H(),e.next=4,k(t,a);case 4:console.debug("START");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(n,a);case 2:console.debug("SKIP QUESTION");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){n.questions[0].choice=Number(e.target.value),n.questions[0].end=Date.now(),a(Object(u.a)({},n)),q=setTimeout(O,3e3),console.debug("ANSWER")}function D(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.end=Date.now(),e?n.questions.shift():clearTimeout(q);var t=R(n);v(t),n.start=void 0,a(Object(u.a)({},n)),console.debug("END")}return o.a.createElement("div",{className:"app"},!h&&o.a.createElement(S,{start:C}),h&&!p&&o.a.createElement(x,{answer:P,question:g,nextQuestion:O,end:D}),h&&p&&o.a.createElement(N,{isChoiceCorrect:w,question:g,end:D}),E&&o.a.createElement(j,{stats:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.9cbe94af.chunk.js.map