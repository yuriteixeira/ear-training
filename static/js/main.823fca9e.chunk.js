(this["webpackJsonpear-training"]=this["webpackJsonpear-training"]||[]).push([[0],{10:function(e,t,n){e.exports=n(18)},15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a,r,o,l=n(0),i=n.n(l),s=n(8),c=n.n(s),u=(n(15),n(1)),m=n.n(u),d=n(2),v=n(3),f=n(6),p=(n(17),n(9)),h={MAJOR:[{name:"1",steps:0},{name:"2",steps:2},{name:"3",steps:2},{name:"4",steps:1},{name:"5",steps:2},{name:"6",steps:2},{name:"7",steps:2},{name:"8",steps:1}],CHROMATIC:[{name:"1",steps:0},{name:"b2",steps:1},{name:"2",steps:1},{name:"b3",steps:1},{name:"3",steps:1},{name:"4",steps:1},{name:"4#",steps:1},{name:"5",steps:1},{name:"b6",steps:1},{name:"6",steps:1},{name:"b7",steps:1},{name:"7",steps:1},{name:"8",steps:1}]};function E(e){return Number((440*Math.pow(2,e/12)).toFixed(2))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+12*t}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.MAJOR;if(0===e)return t;var a=n.reduce((function(t,n,a){return a>e?t:t+n.steps}),0);return t+a}function H(e){a||(a=new(window.AudioContext||window.webkitAudioContext)),(r=a.createOscillator()).type="triangle",o=a.createGain(),r.connect(o),o.connect(a.destination),r.frequency.setValueAtTime(e,a.currentTime),o.gain.setValueAtTime(1,a.currentTime),r.start()}function b(){o.gain.setValueAtTime(0,a.currentTime),r.stop(a.currentTime)}function C(e,t){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(E(t)),e.abrupt("return",new Promise((function(e){setTimeout((function(){b(),e()}),n)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y(t.scale),t.questions.unshift(a),n(Object(d.a)({},t)),e.next=5,j(t.questions[0]);case 5:t.questions[0].hasPlayed=!0,t.questions[0].start=Date.now(),n(Object(d.a)({},t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.MAJOR,t=function(){var e=k(1)?1:-1,t=k(2)*e;return{note:g(k(11),t)}},n=function(t){var n=k(1)?1:-1,a=k(1)*n,r=k(e.length-1),o=g(w(r,t.note,e),a);return{note:o,index:R(t,o,r,e)}},a=t(),r=n(a);return{tonic:a,interval:r}}function k(e){return Math.floor(Math.random()*Math.floor(e+1))}function R(e,t,n,a){return t===e.note?0:(t-e.note)%12!==0?n:t-e.note>0?a.length-1:0}function j(e){return I.apply(this,arguments)}function I(){return(I=Object(v.a)(m.a.mark((function e(t){var n,a,r,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:750,a=t.tonic,r=t.interval,e.next=4,C(a.note,n);case 4:return e.next=6,C(r.note,n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t={totalQuestions:0,totalIncorrect:0,totalCorrect:0,sumTimeToHit:0,slowerHit:{},fasterHit:{},avgHit:{},date:e.start,totalTime:e.end-e.start};if(e.questions.length<1)return t;var n=e.questions.reverse(),a=JSON.parse(localStorage.getItem("stats"))||[],r=a.reduce((function(e,t){var n,a,r,o,l,i;return(!e.avgHit||(null===(n=t.avgHit)||void 0===n?void 0:n.time)<(null===(a=e.avgHit)||void 0===a?void 0:a.time))&&(e.avgHit=t.avgHit),(!e.fasterHit||(null===(r=t.fasterHit)||void 0===r?void 0:r.time)<(null===(o=e.fasterHit)||void 0===o?void 0:o.time))&&(e.fasterHit=t.fasterHit),(!e.slowerHit||(null===(l=t.slowerHit)||void 0===l?void 0:l.time)>(null===(i=e.slowerHit)||void 0===i?void 0:i.time))&&(e.slowerHit=t.slowerHit),e}),{}),o=n.reduce((function(e,t){if(e.totalQuestions++,t.choice!==t.interval.index)return e.totalIncorrect++,e;e.totalCorrect++;var n=t.end-t.start;e.sumTimeToHit=e.sumTimeToHit+n;var a=e.fasterHit&&e.fasterHit.end-e.fasterHit.start,r=e.slowerHit&&e.slowerHit.end-e.slowerHit.start;return(!a||n<a)&&(e.fasterHit=Object(d.a)({},t,{time:n})),(!r||n>r)&&(e.slowerHit=Object(d.a)({},t,{time:n})),e}),t);return o.avgHit={time:o.totalCorrect&&o.sumTimeToHit/o.totalCorrect,start:e.start},localStorage.setItem("stats",JSON.stringify([].concat(Object(p.a)(a),[o]))),function(e,t){var n,a,r,o,l,i;e.avgHit.isRecord=(null===(n=e.avgHit)||void 0===n?void 0:n.time)<(null===(a=t.avgHit)||void 0===a?void 0:a.time),e.avgHit.lastRecord=t.avgHit,e.fasterHit.isRecord=(null===(r=e.fasterHit)||void 0===r?void 0:r.time)<(null===(o=t.fasterHit)||void 0===o?void 0:o.time),e.fasterHit.lastRecord=t.fasterHit,e.slowerHit.isRecord=(null===(l=e.slowerHit)||void 0===l?void 0:l.time)>(null===(i=t.slowerHit)||void 0===i?void 0:i.time),e.slowerHit.lastRecord=t.slowerHit}(o,r),o}function S(e){if(!e)return"???";var t=(e/1e3).toFixed(2);return"".concat(t,"s")}var N,A=function(e){var t=e.start,n=e.options,a=e.setOptions;function r(e){a(Object(d.a)({},n,{scale:e.target.value}))}return i.a.createElement("section",{className:"start"},i.a.createElement("header",null,"Ear Trainer \ud83c\udfbc"),i.a.createElement("select",{onChange:r},i.a.createElement("option",null,"Choose a scale"),Object.keys(h).map((function(e){return i.a.createElement("option",{key:e,value:e},"Scale: ".concat(e))}))),i.a.createElement("button",{onClick:t},"Press to START!"))},M=function(e){var t=e.game,n=e.question,a=e.nextQuestion,r=e.answer,o=e.end;return i.a.createElement("section",{className:"question"},i.a.createElement("header",null,"What is the interval?"),i.a.createElement("section",{className:"choice"},t.scale.map((function(e,t){return i.a.createElement("button",{key:e.name,value:t,onClick:r,disabled:!n.hasPlayed},e.name)}))),i.a.createElement("section",{className:"other-actions"},i.a.createElement("button",{onClick:function(){return j(n)},disabled:!n.hasPlayed},"Re-play"),i.a.createElement("button",{onClick:a,disabled:!n.hasPlayed},"Next!"),i.a.createElement("button",{onClick:o,disabled:!n.hasPlayed},"I'm done... Stats!")))},Q=function(e){var t=e.isChoiceCorrect,n=e.chosenInterval,a=e.correctInterval,r=e.nextQuestion,o=e.end;return i.a.createElement("section",{className:"choice-feedback"},i.a.createElement("p",null,t?"CORRECT! \ud83c\udf89":"Incorrect... \ud83d\ude28"),!t&&i.a.createElement("p",null,"You chose ",null===n||void 0===n?void 0:n.name," but the right interval is ",i.a.createElement("strong",null,null===a||void 0===a?void 0:a.name)),i.a.createElement("p",null,i.a.createElement("strong",null,"But what about this one?")),i.a.createElement("p",null,i.a.createElement("button",{onClick:r},"Next, pls!")),i.a.createElement("p",null,i.a.createElement("button",{onClick:function(){return o(!1)}},"I'm done... Stats!")))},D=function(e){var t=e.stats;return i.a.createElement("section",{className:"end"},i.a.createElement("div",{className:"stats"},t.totalQuestions>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Total questions")),i.a.createElement("td",null,t.totalQuestions)),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Correct")),i.a.createElement("td",null,t.totalCorrect)),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Incorrect")),i.a.createElement("td",null,t.totalIncorrect)),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Faster hit")),i.a.createElement("td",null,i.a.createElement(F,{stat:t.fasterHit}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Slower hit")),i.a.createElement("td",null,i.a.createElement(F,{stat:t.slowerHit}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Avg time to hit")),i.a.createElement("td",null,i.a.createElement(F,{stat:t.avgHit}))),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("strong",null,"Total elapsed time")),i.a.createElement("td",null,S(t.totalTime))))))))};function F(e){var t,n,a,r,o=e.stat;return i.a.createElement(i.a.Fragment,null,S(null===o||void 0===o?void 0:o.time)," ",(null===o||void 0===o?void 0:o.isRecord)?i.a.createElement("strong",null," RECORD!"):i.a.createElement("span",null,(null===o||void 0===o||null===(t=o.lastRecord)||void 0===t?void 0:t.time)&&i.a.createElement(i.a.Fragment,null," ","- Last record: ",i.a.createElement("strong",null,S(null===o||void 0===o||null===(n=o.lastRecord)||void 0===n?void 0:n.time))),(null===o||void 0===o||null===(a=o.lastRecord)||void 0===a?void 0:a.start)&&" at "+new Intl.DateTimeFormat("en-US").format(new Date(null===o||void 0===o||null===(r=o.lastRecord)||void 0===r?void 0:r.start))))}var J=function(){var e=Object(l.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(l.useState)({}),o=Object(f.a)(r,2),s=o[0],c=o[1],u=Object(l.useState)({}),p=Object(f.a)(u,2),E=p[0],g=p[1],w=function(e){var t,n,a=!!e.start,r=!!e.end,o=e.questions,l=o&&o.length>0?o[0]:void 0,i=null===l||void 0===l?void 0:l.choice,s=void 0!==i,c=l&&i===(null===l||void 0===l||null===(t=l.interval)||void 0===t?void 0:t.index),u=e.scale&&i&&e.scale[i];return{hasGameStarted:a,hasGameEnded:r,questions:o,question:l,hasMadeChoice:s,isChoiceCorrect:c,correctInterval:e.scale&&e.scale[null===l||void 0===l||null===(n=l.interval)||void 0===n?void 0:n.index],chosenInterval:u}}(s),H=w.hasGameStarted,b=w.hasGameEnded,C=w.question,O=w.hasMadeChoice,x=w.isChoiceCorrect,y=w.chosenInterval,k=w.correctInterval;function R(){return{scale:h[n.scale],start:Date.now(),questions:[],end:void 0}}function j(){return I.apply(this,arguments)}function I(){return(I=Object(v.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=R()).scale){e.next=4;break}return alert("Choose a scale!"),e.abrupt("return");case 4:return e.next=6,T(t,c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return F.apply(this,arguments)}function F(){return(F=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(N),e.next=3,T(s,c);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){s.questions[0].choice=Number(e.target.value),s.questions[0].end=Date.now(),c(Object(d.a)({},s)),N=setTimeout(S,3e3)}function P(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(N),e&&s.questions.shift(),s.end=Date.now();var t=q(s);g(t),s.start=void 0,c(Object(d.a)({},s))}return i.a.createElement("div",{className:"app"},!H&&i.a.createElement(A,{start:j,options:n,setOptions:a}),H&&!O&&i.a.createElement(M,{game:s,question:C,nextQuestion:S,answer:J,end:P}),H&&O&&i.a.createElement(Q,{isChoiceCorrect:x,chosenInterval:y,correctInterval:k,nextQuestion:S,end:P}),b&&i.a.createElement(D,{stats:E}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.823fca9e.chunk.js.map